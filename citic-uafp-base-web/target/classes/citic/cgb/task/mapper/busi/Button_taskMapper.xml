<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="citic.cgb.task.mapper.busi.Button_taskMapper">

	<select id="selectBb13_sys_paraValsByVo" parameterType="citic.cgb.task.domain.Button_task" resultType="citic.cgb.task.domain.Button_task">
		select code,codename,des,vals,flag
		from bb13_sys_para
		<where>
			<if test="code != null  and code != '' ">
				code = #{code}
			</if>
			<if test="flag != null  and flag != '' ">
				and flag = #{flag}
			</if>
		</where>
	</select>
    
    <select id="selectTaskkeyByCode" resultType="String">
       select taskkey from mc21_task_fact3
       where tasktype='1' and  bdhm in (select bdhm from br32_jg where code ='fail')
    </select>
    
	<update id="batchUpdateMc21_task_fact3ByIn" parameterType="String">
		update mc21_task_fact3 t set t.serverid=''
	    where tasktype='1' and  taskkey in (${_parameter})
	</update>
	
    <delete id="batchDeleteMc21_task_statusByIn" parameterType="String">
	    delete from mc21_task3_status
	    where taskkey in (${_parameter})
	</delete>
	
	<update id="updateBb13_sys_paraByID" parameterType="citic.cgb.task.domain.Button_task">
	    update bb13_sys_para set vals = #{vals_new} where code = #{code}
	</update>
</mapper> 
